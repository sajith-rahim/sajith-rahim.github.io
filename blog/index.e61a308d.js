function init(){let t={metadata:{title:"Knowledge Base",version:"1.3",index_uri:"https://raw.githubusercontent.com/sajith-rahim/cdn/main/content/blog/static/content/index.json",index_type:"json",index_raw:{},owner:"sajith.rahim",owner_email:"sajith.rahim@outlook.com",year:"2022",ticker_text:"`â€¢ ${this.metadata.title} v${this.metadata.version} â€¢     | No of posts: ${ this.data.posts.length}`"},data:{posts:[],top_posts:[],tags:["fiction","feel-good","mafia"]},state:{indexLoaded:!1,focusedPostsLoaded:!1,topPostsLoaded:!1,currentProject:{},currentProjectIndex:0,isHomeView:!0,scrollPercentage:0,darkMode:!1,hasError:!1,errorMessage:`Oops! Something broke! <br/> Post you're looking for doesn't exist or may have been moved.\n            <hr/> Please contact the admin. <br/>\n            <code style="text-decoration:line-through;">${window.location.search.toString()||""}</code>`,currentFilter:[]},auth:{doAuth:!0,hash:54149364,authenticated:!1,no_auth_pass:"91194"},converters:{mdConverter:new showdown.Converter,synth:window.speechSynthesis},geo:{enabled:!0,ip:"",geoLocation:""},init(){this.geo.enabled&&fetch("https://api.ipify.org/?format=json").then((t=>t.json())).then((t=>this.geo.ip=t.ip)).then(fetch(`http://ip-api.com/json/${this.geo.ip}`).then((t=>t.json())).then((t=>this.geo.geoLocation=t))),this.auth.authenticated="true"===localStorage.getItem("md-blog-auth-status"),this.state.darkMode="true"===localStorage.getItem("md-blog-is-dark-mode"),this.auth.doAuth&&!this.auth.authenticated?this.$watch("auth.authenticated",(t=>{t&&(localStorage.setItem("md-blog-auth-status",!0),this.doInit())})):(this.auth.authenticated=!0,localStorage.setItem("md-blog-auth-status",!0),this.doInit())},doInit(){fetch(this.metadata.index_uri).then((t=>t.ok?t.json()||{}:Promise.reject(t))).then((t=>this.metadata.index_raw=t)).then((t=>this.processIndexJSON(t))).catch((t=>{this.state.indexLoaded=!1,console.log("[ðŸ“’.md-blog] "+t)}))},authenticate(t){this.auth.authenticated=this.simpleHash($(t).val())===this.auth.hash},simpleHash:t=>t.split("").reduce(((t,e)=>(t=(t<<5)-t+e.charCodeAt(0))&t),0),updateScrollPercentage(t){try{let e=(Math.abs($(t).children(".article-content-wrapper").first().offset().top)+100)/$(t).height();this.state.scrollPercentage=100*e}catch(t){console.log("[ðŸ“’.md-blog] Scroll update failed with error : "+t)}},processIndexJSON(t){try{t&&(this.state.indexLoaded=!0),t.title&&(this.metadata.title=t.title),t.version&&(this.metadata.version=t.version),t.owner_email&&(this.metadata.owner_email=t.owner_email),t.owner&&(this.metadata.owner=t.owner),t.year&&(this.metadata.year=t.year),t.ticker_text&&(this.metadata.ticker_text=`â€¢ ${t.ticker_text} â€¢`,$(this.$refs.marquee).html(this.metadata.ticker_text)),t.posts&&(this.data.posts=this.doFilterByTag(t.posts),this.state.currentProject=this.data.posts[0],this.state.focusedPostsLoaded=!0),this.state.errorMessage=`\n                Oops! Something broke! <br/> Post you're looking for doesn't exist or may have been moved.\n                <hr/> Please contact the admin: <a href="mailto:${this.metadata?.owner_email}">${this.metadata?.owner}</a> <br/>\n                <code style="text-decoration:line-through;">${window.location.search.toString()||""}</code>\n                `,t.top_posts=t.top_posts||[];let e=this.data.posts.filter((e=>t.top_posts.includes(e.title))),o=[],s=e.map((t=>t.title));t.top_posts.forEach((t=>{let a=s.indexOf(t);a>-1&&o.push(e[a])})),o&&(this.data.top_posts=o,this.state.topPostsLoaded=!0,t.show_post_count_in_ticker&&$(this.$refs.marquee).html(`${this.metadata.ticker_text} | No of posts: ${this.data.posts.length}`)),window.location.search.length>0&&this.handleDirectURL()}catch(t){console.log("[ðŸ“’.md-blog] Processing index.json failed with error : "+t)}},processMdResponse(t){try{return this.converters.mdConverter.makeHtml(t)}catch(t){console.log("[ðŸ“’.md-blog] Processing md with error : "+t)}},doFilterByTag(t){if(!this.state.currentFilter.length>0)return t;return t.filter((t=>{if(t.tags)return t.tags.some((t=>this.state.currentFilter.indexOf(t)>=0))}))},invokeFilterBy(t){this.state.currentFilter.includes(t)?this.state.currentFilter=this.state.currentFilter.filter((e=>e!==t)):this.state.currentFilter.push(t),this.doInit()},handlePostScrollIntoView(t,e){},handleDirectURL(){try{let t="";null!==(grps=/(([\?]?search=)(.*))/.exec(window.location.toString()))&&(t=decodeURI(grps[grps.length-1]||""));let e=this.data.posts.filter((e=>e.title.includes(t)));e[0]?(this.state.hasError=!1,this.openBlogArticle("",{...e[0]})):(this.state.hasError=!0,this.toggleArticleView())}catch(t){}},openBlogArticle(t,e){try{this.toggleArticleView(),$(this.$refs.marquee).html(e.title),fetch(e.markdown_uri).then((t=>t.text())).then((t=>this.processMdResponse(t))).then((t=>$(this.$refs.article_content).html(t)))}catch(t){console.log("[ðŸ“’.md-blog] Retreiving article failed with error : "+t)}},clearErrorState(){this.state.hasError=!1},toggleArticleView(){try{this.converters.synth.cancel(),this.state.isHomeView=!this.state.isHomeView}catch(t){}},readContent(){try{var t=new SpeechSynthesisUtterance;t.text=this.$refs.article_content.innerText,this.converters.synth.speak(t)}catch(t){console.log(t)}},returnToHome(){try{window.history.pushState("object or string","Title","/"+window.location.href.substring(window.location.href.lastIndexOf("/")+1).split("?")[0]),this.clearErrorState(),this.toggleArticleView()}catch(t){}},getDirectLink(){try{let t=$(this.$refs.marquee).text(),e=window.location.origin+"/?search="+encodeURI(t);navigator.clipboard.writeText(e)}catch(t){}},logout(){localStorage.setItem("md-blog-auth-status",!1),this.auth.authenticated=!1},setTheme(){this.state.darkMode=!this.state.darkMode,localStorage.setItem("md-blog-is-dark-mode",this.state.darkMode)},handleWheelScroll(t){let e=this.data.posts.length-1;t.deltaY<0?this.state.currentProjectIndex=0==this.state.currentProjectIndex?0:this.state.currentProjectIndex-1:this.state.currentProjectIndex=this.state.currentProjectIndex==e?e:this.state.currentProjectIndex+1,this.state.currentProject=this.data.posts[this.state.currentProjectIndex]||this.data.posts[0]},HTMLElementToObjectConverter(t,e,o=["div"]){if(t.nodeType===Node.TEXT_NODE)return t.nodeValue;t.nodeType===Node.DOCUMENT_NODE&&(t=t.documentElement);const s={};if(s.nodeType=t.nodeType,t.nodeType===Node.ELEMENT_NODE){s.tagName=t.tagName,s.attributes=[];for(let e=0,o=t.attributes.length;e<o;++e){const o=t.attributes[e];s.attributes.push({name:o.name,value:o.value})}s.children=[];for(let e=t.firstChild;e;e=e.nextSibling)s.children.push(this.HTMLElementToObjectConverter(e))}else s.nodeValue=t.nodeValue;return s}};return window.model=t,t}